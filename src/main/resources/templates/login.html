<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LungHi Peace登入</title>
    <div th:include="FrontEnd/includes/head :: head"></div>
    <link th:href="@{/BackEnd/css/login.css}" rel="stylesheet" type="text/css">
    <!--jQuery-->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
    <!--Bootstrap-->
<!--    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"></link>-->
    <!--google login api-->
    <script src="https://apis.google.com/js/platform.js" async="async"></script>
    <meta name="google-signin-client_id" content="949331375315-4kuetli2rtqjh0ragjo98sffnnapkuc4.apps.googleusercontent.com"/>
    <!--google recaptcha-->
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <script>
        // 登入之後
        function onSignIn(googleUser) {
            var profile = googleUser.getBasicProfile(),
                target = document.getElementById("GOOGLE_STATUS_1"),
                html = "";

            html += "ID: " + profile.getId() + "<br/>";
            html += "會員暱稱： " + profile.getName() + "<br/>";
            html += "會員頭像：" + profile.getImageUrl() + "<br/>";
            html += "會員 email：" + profile.getEmail() + "<br/>";
            console.log(html);
            target.innerHTML = html;
        }
    </script>

</head>

<body>
<!-- _navbar -->
<div th:include="FrontEnd/includes/navbar :: navbar"></div>

<!-- Login Section Start -->
<div class="section section-margin">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-md-8 m-auto p-b-45">
                <div class="login-wrapper">

                    <!-- Login Title & Content Start -->
                    <div class="section-content text-center m-b-50">
                        <h2 class="title m-b-10">LungHi Peace 登入</h2>
                    </div>
                    <!-- Login Title & Content End -->

                    <!-- Form Action Start -->
                    <form action="#" id="login" method="post" th:action="@{/loginPage}">

<!--                        <img class="form_pic" th:src="@{/BackEnd/images/login.png}" alt="">-->

                        <div class="form__message form__message--error" th:text="${errormsg}"></div>
                        <!-- Input Email Start -->
                        <div class="single-input-item m-b-10">
                            <input type="text" class="form__input" autofocus placeholder="Username" id="username" name="username"
                                   autocomplete="off">
                        </div>
                        <!-- Input Email End -->

                        <!-- Input Password Start -->
                        <div class="single-input-item m-b-10">
                            <input type="password" class="form__input" autofocus placeholder="Password" id="password" name="password">
                            <i class="fa-solid fa-eye" id="togglePassword"></i>
                        </div>
                        <!-- Input Password End -->

                        <!-- Lost Password & Creat New Account Start -->
                        <div class="lost-password m-b-15 m-l-20">
                            <a th:href="@{/FrontMember/forgetPassword}" class="forget-pwd m-b-15">忘記密碼</a>
                            <a th:href="@{/FrontMember/register}">註冊會員</a>
                        </div>
                        <!-- Lost Password & Creat New Account End -->

                        <!-- Button/Forget Password Start -->
                        <div class="single-input-item m-b-15">
                            <div class="login-reg-form-meta m-b-20" style="justify-content: space-between;">
                                <div id="recaptchaDiv" class="g-recaptcha"
                                     data-sitekey="6LczvBYhAAAAAPJjnY3FmZG0zF4uLc20TVQbrIZn"
                                     data-theme="light" data-size="normal"
                                     data-callback="verifyCallback">
                                </div>
                                <span style="justify-content: flex-end;">
                                    <!--登入、登出按鈕-->
                                    <a id="googleLoginBtn" th:href="@{/oauth2/authorization/google}"><button type="button" class="btn btn login-with-google-btn m-b-15"> GOOGLE登入</button></a>
                                    <button id="loginSubmitBtn" type="submit" class="btn btn m-b-15 m-l-20 ">登入</button>
                                </span>
                            </div>
                        </div>
                        <!-- Button/Forget Password End -->


                        <div class="single-input-item m-t-50">
                            <div class="login-reg-form-meta m-b-n15" style="justify-content: space-between;">
                                <button type="button" class="btn btn btn-for-Role  m-b-15 " id="adminLoginBtn">ADMIN</button>
                                <button type="button" class="btn btn btn-for-Role  m-b-15 " id="employeeLoginBtn">EMPLOYEE</button>
                                <button type="button" class="btn btn btn-for-Role  m-b-15  " id="activeLoginBtn">ACTIVE</button>
                                <button type="button" class="btn btn btn-for-Role  m-b-15  " id="userLoginBtn">USER</button>
                            </div>
                        </div>

                    </form>
                    <!-- Form Action End -->

                </div>
            </div>
        </div>
    </div>
</div>
<!-- Login Section End -->

<div th:include="BackEnd/includes/footer :: footer"></div>

<!-- Modal Start  -->
<div class="modalquickview modal fade" id="quick-view" tabindex="-1" aria-labelledby="quick-view" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <button class="btn close" data-bs-dismiss="modal">×</button>
            <div class="row">
                <div class="col-md-6 col-12">

                    <!-- Product Details Image Start -->
                    <div class="modal-product-carousel">

                        <!-- Single Product Image Start -->
                        <div class="swiper-container">
                            <div class="swiper-wrapper">
                                <a class="swiper-slide" href="#">
                                    <img class="w-100" src="assets/images/products/large-product/1.png" alt="Product">
                                </a>
                                <a class="swiper-slide" href="#">
                                    <img class="w-100" src="assets/images/products/large-product/2.png" alt="Product">
                                </a>
                                <a class="swiper-slide" href="#">
                                    <img class="w-100" src="assets/images/products/large-product/3.png" alt="Product">
                                </a>
                                <a class="swiper-slide" href="#">
                                    <img class="w-100" src="assets/images/products/large-product/4.png" alt="Product">
                                </a>
                                <a class="swiper-slide" href="#">
                                    <img class="w-100" src="assets/images/products/large-product/5.png" alt="Product">
                                </a>
                            </div>

                            <!-- Swiper Pagination Start -->
                            <!-- <div class="swiper-pagination d-md-none"></div> -->
                            <!-- Swiper Pagination End -->

                            <!-- Next Previous Button Start -->
                            <div class="swiper-product-button-next swiper-button-next"><i class="ti-arrow-right"></i></div>
                            <div class="swiper-product-button-prev swiper-button-prev"><i class="ti-arrow-left"></i></div>
                            <!-- Next Previous Button End -->
                        </div>
                        <!-- Single Product Image End -->

                    </div>
                    <!-- Product Details Image End -->

                </div>
                <div class="col-md-6 col-12 overflow-hidden position-relative">

                    <!-- Product Summery Start -->
                    <div class="product-summery position-relative">

                        <!-- Product Head Start -->
                        <div class="product-head m-b-15">
                            <h2 class="product-title">Single Product Slider</h2>
                        </div>
                        <!-- Product Head End -->

                        <!-- Rating Start -->
                        <span class="rating justify-content-start m-b-10">
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star-half-o"></i>
                            <i class="fa fa-star-o"></i>
                        </span>
                        <!-- Rating End -->

                        <!-- Price Box Start -->
                        <div class="price-box m-b-10">
                            <span class="regular-price">$70.00</span>
                            <span class="old-price"><del>$85.00</del></span>
                        </div>
                        <!-- Price Box End -->

                        <!-- SKU Start -->
                        <div class="sku m-b-15">
                            <span>SKU: 12345</span>
                        </div>
                        <!-- SKU End -->

                        <!-- Product Inventory Start -->
                        <div class="product-inventroy m-b-15">
                            <span class="inventroy-title"> <strong>Availability:</strong></span>
                            <span class="inventory-varient">12 Left in Stock</span>
                        </div>
                        <!-- Product Inventory End -->

                        <!-- Description Start -->
                        <p class="desc-content m-b-25">There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable.</p>
                        <!-- Description End -->

                        <!-- Quantity Start -->
                        <div class="quantity d-flex align-items-center justify-content-start m-b-25">
                            <span class="m-r-10"><strong>Qty: </strong></span>
                            <div class="cart-plus-minus">
                                <input class="cart-plus-minus-box" value="1" type="text">
                                <div class="dec qtybutton"></div>
                                <div class="inc qtybutton"></div>
                            </div>
                        </div>
                        <!-- Quantity End -->

                        <!-- Cart Button Start -->
                        <div class="cart-btn action-btn m-b-30">
                            <div class="action-cart-btn-wrapper d-flex justify-content-start">
                                <div class="add-to_cart">
                                    <a class="btn btn-primary btn-hover-dark rounded-0" href="cart.html">Add to cart</a>
                                </div>
                                <a href="wishlist.html" title="Wishlist" class="action"><i class="ti-heart"></i></a>
                            </div>
                        </div>
                        <!-- Cart Button End -->

                        <!-- Social Shear Start -->
                        <div class="social-share">
                            <div class="widget-social justify-content-center m-b-30">
                                <a title="Twitter" href="#/"><i class="icon-social-twitter"></i></a>
                                <a title="Instagram" href="#/"><i class="icon-social-instagram"></i></a>
                                <a title="Linkedin" href="#/"><i class="icon-social-linkedin"></i></a>
                                <a title="Skype" href="#/"><i class="icon-social-skype"></i></a>
                                <a title="Dribble" href="#/"><i class="icon-social-dribbble"></i></a>
                            </div>
                        </div>
                        <!-- Social Shear End -->

                        <!-- Payment Option Start -->
                        <div class="payment-option m-t-20 d-flex justify-content-start">
                            <span><strong>Payment: </strong></span>
                            <a href="#">
                                <img class="fit-image m-l-5" src="assets/images/payment/payment_large.png" alt="Payment Option Image">
                            </a>
                        </div>
                        <!-- Payment Option End -->

                    </div>
                    <!-- Product Summery End -->

                </div>
            </div>
        </div>
    </div>
</div>
<!-- Modal End  -->

<!-- Scroll Top Start -->
<a href="#" class="scroll-top show" id="scroll-top">
    <i class="arrow-top ti-angle-double-up"></i>
    <i class="arrow-bottom ti-angle-double-up"></i>
</a>
<!-- Scroll Top End -->

<!-- Mobile Menu Start -->
<div class="mobile-menu-wrapper">
    <div class="offcanvas-overlay"></div>

    <!-- Mobile Menu Inner Start -->
    <div class="mobile-menu-inner">

        <!-- Button Close Start -->
        <div class="offcanvas-btn-close">
            <i class="fa fa-times"></i>
        </div>
        <!-- Button Close End -->

        <!-- Mobile Menu Inner Wrapper Start -->
        <div class="mobile-menu-inner-wrapper">
            <!-- Mobile Menu Search Box Start -->
            <div class="search-box-offcanvas">
                <form>
                    <input class="search-input-offcanvas" type="text" placeholder="Search product...">
                    <button class="search-btn"><i class="icon-magnifier"></i></button>
                </form>
            </div>
            <!-- Mobile Menu Search Box End -->

            <!-- Mobile Menu Start -->
            <div class="mobile-navigation">
                <nav>
                    <ul class="mobile-menu">
                        <li class="has-children">
                            <a href="#">Home <i class="fa fa-angle-down"></i></a>
                            <ul class="dropdown">
                                <li><a href="index.html">Home One</a></li>
                                <li><a href="index-2.html">Home Two</a></li>
                                <li><a href="index-3.html">Home Three</a></li>
                                <li><a href="index-4.html">Home Four</a></li>
                            </ul>
                        </li>
                        <li class="has-children">
                            <a href="#">Shop <i class="fa fa-angle-down" aria-hidden="true"></i></a>
                            <ul class="dropdown">
                                <li><a href="shop.html">Shop Grid</a></li>
                                <li><a href="shop-left-sidebar.html">Shop Left Sidebar</a></li>
                                <li><a href="shop-right-sidebar.html">Shop Right Sidebar</a></li>
                                <li><a href="shop-list-fullwidth.html">Shop List Fullwidth</a></li>
                                <li><a href="shop-list-left-sidebar.html">Shop List Left Sidebar</a></li>
                                <li><a href="shop-list-right-sidebar.html">Shop List Right Sidebar</a></li>
                                <li><a href="wishlist.html">Wishlist</a></li>
                                <li><a href="cart.html">Shopping Cart</a></li>
                                <li><a href="checkout.html">Checkout</a></li>
                                <li><a href="compare.html">Compare</a></li>
                            </ul>
                        </li>
                        <li class="has-children">
                            <a href="#">Product <i class="fa fa-angle-down" aria-hidden="true"></i></a>
                            <ul class="dropdown">
                                <li><a href="single-product.html">Single Product</a></li>
                                <li><a href="single-product-sale.html">Single Product Sale</a></li>
                                <li><a href="single-product-group.html">Single Product Group</a></li>
                                <li><a href="single-product-normal.html">Single Product Normal</a></li>
                                <li><a href="single-product-affiliate.html">Single Product Affiliate</a></li>
                                <li><a href="single-product-slider.html">Single Product Slider</a></li>
                            </ul>
                        </li>
                        <li class="has-children">
                            <a href="#">Pages <i class="fa fa-angle-down" aria-hidden="true"></i></a>
                            <ul class="dropdown">
                                <li><a href="about.html">About Us</a></li>
                                <li><a href="contact.html">Contact</a></li>
                                <li><a href="faq.html">Faq</a></li>
                                <li><a href="error-404.html">Error 404</a></li>
                                <li><a href="my-account.html">My Account</a></li>
                                <li><a href="login.html">Login | Register</a></li>
                            </ul>
                        </li>
                        <li class="has-children">
                            <a href="#">Blog <i class="fa fa-angle-down" aria-hidden="true"></i></a>
                            <ul class="dropdown">
                                <li><a href="blog.html">Blog</a></li>
                                <li><a href="blog-left-sidebar.html">Blog Left Sidebar</a></li>
                                <li><a href="blog-right-sidebar.html">Blog Right Sidebar</a></li>
                                <li><a href="blog-details.html">Blog Details</a></li>
                                <li><a href="blog-details-sidebar.html">Blog Details Sidebar</a></li>
                            </ul>
                        </li>
                        <li><a href="about.html">About</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </nav>
            </div>
            <!-- Mobile Menu End -->

            <!-- Language, Currency & Link Start -->
            <div class="offcanvas-lag-curr m-b-30">
                <div class="header-top-lan-curr-link">
                    <div class="header-top-lan dropdown">
                        <h4 class="title">Language:</h4>
                        <button class="dropdown-toggle" data-bs-toggle="dropdown">English <i class="fa fa-angle-down"></i></button>
                        <ul class="dropdown-menu dropdown-menu-right">
                            <li><a class="dropdown-item" href="#">English</a></li>
                            <li><a class="dropdown-item" href="#">Japanese</a></li>
                            <li><a class="dropdown-item" href="#">Arabic</a></li>
                            <li><a class="dropdown-item" href="#">Romanian</a></li>
                        </ul>
                    </div>
                    <div class="header-top-curr dropdown">
                        <h4 class="title">Currency:</h4>
                        <button class="dropdown-toggle" data-bs-toggle="dropdown">USD <i class="fa fa-angle-down"></i></button>
                        <ul class="dropdown-menu dropdown-menu-right">
                            <li><a class="dropdown-item" href="#">USD</a></li>
                            <li><a class="dropdown-item" href="#">Pound</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <!-- Language, Currency & Link End -->

            <!-- Contact Links/Social Links Start -->
            <div class="mt-auto bottom-0">

                <!-- Contact Links Start -->
                <ul class="contact-links">
                    <li><i class="fa fa-phone"></i><a href="#"> +012 3456 789</a></li>
                    <li><i class="fa fa-envelope-o"></i><a href="#"> info@example.com</a></li>
                    <li><i class="fa fa-clock-o"></i> <span>Monday - Sunday 9.00 - 18.00</span> </li>
                </ul>
                <!-- Contact Links End -->

                <!-- Social Widget Start -->
                <div class="widget-social">
                    <a title="Facebook" href="#"><i class="fa fa-facebook-f"></i></a>
                    <a title="Twitter" href="#"><i class="fa fa-twitter"></i></a>
                    <a title="Linkedin" href="#"><i class="fa fa-linkedin"></i></a>
                    <a title="Youtube" href="#"><i class="fa fa-youtube"></i></a>
                    <a title="Vimeo" href="#"><i class="fa fa-vimeo"></i></a>
                </div>
                <!-- Social Widget Ende -->
            </div>
            <!-- Contact Links/Social Links End -->
        </div>
        <!-- Mobile Menu Inner Wrapper End -->

    </div>
    <!-- Mobile Menu Inner End -->
</div>
<!-- Mobile Menu End -->
<script type="text/javascript">
    /*先讓送出按鈕隱藏*/
    document.getElementById("loginSubmitBtn").style.display = 'none';
    document.getElementById("googleLoginBtn").style.display = 'none';

    /*傳送google recaptcha到後端*/
    function verifyCallback(token) {
        // console.log("in verifycallback");
        var formData = new FormData();
        formData.append('token', token);
        // Google Apps Script 部署為網路應用程式後取得的 URL
        var uriGAS = "https://script.google.com/macros/s/AKfycbzwguehfAUBLj1L6jBwvdxJNEUkce650SRhzHfFG_CdfRBgQksbv7hzFVG8FmmzZtUJ/exec";
        fetch(uriGAS, {
            method: "POST",
            body: formData
        }).then(response => response.json())
            .then(result => {
                if(result.success) {
                    // 後端驗證成功，success 會是 true
                    // 送出按紐show出
                    document.getElementById("loginSubmitBtn").style.display = '';
                    document.getElementById("googleLoginBtn").style.display = '';
                } else {
                    // success 為 false 時，代表驗證失敗，error-codes 會告知原因
                    Swal.fire({
                        icon: 'error',
                        title: result['error-codes'][0],
                    })
                }
            })
            .catch(err => {
                Swal.fire({
                    icon: 'error',
                    title: err,
                })
            })
    }

    //轉換eye -> 顯示密碼
    let togglePassword = document.querySelector("#togglePassword");
    let password = document.querySelector("#password");
    togglePassword.addEventListener('click', function () {
        // 判斷password 還是text
        let type = password.getAttribute('type') === 'password' ? 'text' : 'password';  //三元運算式，把抓到的type存回type
        password.setAttribute('type', type);  //改變type
        this.classList.toggle('fa-eye-slash'); //轉換眼睛圖示
        password.focus();
    });

    let username = document.getElementById("username");
    let login = document.getElementById("login");
    // let loginSubmitBtn = document.getElementById("loginSubmitBtn");

    let adminLoginBtn = document.getElementById("adminLoginBtn");
    adminLoginBtn.addEventListener("click",function (){
        username.value = "admin";
        password.value = "admin";
        login.submit();
    })

    let employeeLoginBtn = document.getElementById("employeeLoginBtn");
    employeeLoginBtn.addEventListener("click",function (){
        username.value = "employee";
        password.value = "employee";
        login.submit();
    })
    let activeLoginBtn = document.getElementById("activeLoginBtn");
    activeLoginBtn.addEventListener("click",function (){
        username.value = "active";
        password.value = "active";
        login.submit();
    })
    let userLoginBtn = document.getElementById("userLoginBtn");
    userLoginBtn.addEventListener("click",function (){
        username.value = "user";
        password.value = "user";
        login.submit();
    })

</script>

<div th:include="FrontEnd/includes/JavaScript :: JavaScript"></div>
</body>

</html>